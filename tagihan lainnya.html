<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/app/css/style.css">
    <link rel="stylesheet" href="assets/app/css/main.css">
    <link rel="stylesheet" href="assets/font-awesome/css/font-awesome.min.css">

    <script src="assets/jquery/dist/jquery.min.js"></script>
    <!-- <script src="https://kit.fontawesome.com/3b4957157c.js" crossorigin="anonymous"></script> -->

    <title>Home Mahasiswa</title>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark sticky-top bg-blue-dark">
        <div class="container-lg">
            <a class="navbar-brand text-yellow" href="index.html">Home</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="main-navbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link text-white" href="tagihan.html">Tagihan Prodi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="tagihan lainnya.html">Tagihan Lainnya</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="pembayaran.html">Pembayaran</a>
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link text-white" href="tagihan lainnya.html">
                            <i class="fa fa-bell"></i> <span class="badge badge-pill badge-danger">2</span>
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link text-white dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Fadhel Rifky Wicaksono
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="Profil.html">
                                Profil
                            </a>
                            <a class="dropdown-item" href="Riwayat.html">
                                Riwayat
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="#">
                                <i class="fa fa-sign-out text-secondary"></i> Exit
                            </a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="wrap py-3">
        <div class="container-lg">

            <div class="row d-lg-flex justify-content-center">
                <div class="col-lg-12">

                    <h2>Tagihan Lainnya</h2>

                    <div class="callout callout-info pl-3 py-0 mb-3 border-top-0 border-right-0 border-bottom-0">

                        <p>
                            <mark>
                                <small>
                                    * Anda memiliki 2 tagihan,
                                    silahkan pilih tagihan yang akan di bayar/hubungi bagian keuangan.
                                </small>
                            </mark>
                        </p>
                        <p>
                            <span class="text-secondary">Tagihan pembayaran sampai dengan tanggal <mark>01-01-2026</mark></span> <br>
                            <strong class="text-secondary">Total Tagihan Pembayaran</strong>:
                            <small class="align-top text-secondary">Rp</small>
                            <span class="text-danger lead" id="total-angka">1.600.000</span>
                            (<em id="total-bilangan" style="text-transform: capitalize;">Satu Juta Enam Ratus Ribu Rupiah</em>)
                        </p>
                    </div>

                    <!-- <h3>[CARD STYLE]</h3> -->
                    <small class="my-2">
                        <i class="fa fa-chevron-right"></i> Pilih tagihan yang ingin Anda bayarkan,
                        lalu tekan tombol <strong><em>Bayar</em></strong>
                        untuk menuju ke proses pembayaran.
                    </small>

                    <div id="tagihan-list">
                        <div class="card card-tagihan shadow-sm my-3">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-12 col-md-4">
                                        <strong class="text-blue-dark">TA/Skripsi 2025/2026</strong> <br>
                                        <small>Periode Tahun 2025/2026</small>
                                        <hr class="my-1 d-sm-block d-md-none">
                                    </div>
                                    <div class="col-6 col-md-2">
                                        <small class="text-nowrap text-secondary">Tagihan</small>
                                        <p class="mb-0">850.000</p>
                                    </div>
                                    <div class="col-6 col-md-2">
                                        <small class="text-nowrap text-secondary">Potongan</small>
                                        <p class="mb-0">100.000</p>
                                    </div>
                                    <div class="col-6 col-md-2">
                                        <small class="text-nowrap text-secondary">Batas Pembayaran</small>
                                        <p class="mb-0">01-01-2026</p>
                                    </div>
                                    <div class="col-6 col-md-2">
                                        <small class="text-nowrap text-secondary">Akhir Tempo</small>
                                        <p class="mb-0">07-01-2026</p>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer bg-white">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input pilih-tagihan" id="customCheck1">
                                    <label class="custom-control-label" for="customCheck1">
                                        <span class="border border-info rounded text-info px-2 py-1 pilih-tagihan-label">Pilih Tagihan</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="card card-tagihan shadow-sm my-3">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-12 col-md-4">
                                        <strong class="text-blue-dark">KKN Tematik 2025/2026</strong> <br>
                                        <small>Periode Tahun 2025/2026</small>
                                        <hr class="my-1 d-sm-block d-md-none">
                                    </div>
                                    <div class="col-6 col-md-2">
                                        <small class="text-nowrap text-secondary">Tagihan</small>
                                        <p class="mb-0">750.000</p>
                                    </div>
                                    <div class="col-6 col-md-2">
                                        <small class="text-nowrap text-secondary">Potongan</small>
                                        <p class="mb-0">100.000</p>
                                    </div>
                                    <div class="col-6 col-md-2">
                                        <small class="text-nowrap text-secondary">Batas Pembayaran</small>
                                        <p class="mb-0">01-12-2025</p>
                                    </div>
                                    <div class="col-6 col-md-2">
                                        <small class="text-nowrap text-secondary">Akhir Tempo</small>
                                        <p class="mb-0">07-12-2025</p>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer bg-white">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input pilih-tagihan" id="customCheck2">
                                    <label class="custom-control-label" for="customCheck2">
                                        <span class="border border-info rounded text-info px-2 py-1 pilih-tagihan-label">Pilih Tagihan</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    <div class="row justify-content-center">
                        <div class="col-md-3">
                            <button type="button" id="submit-tagihan" class="btn btn-block btn-primary" name="submit">
                                Bayar
                            </button>
                        </div>
                    </div>

                    Keterangan:
                    <ul class="my-0">
                        <li class="list-item">
                            <small>Denda akan diberikan jika tanggal tempo terlambat, dan dapat berupa akumulasi dari Denda sebelumnya</small>
                        </li>
                        <li class="list-item">
                            <small>Sistem dapat secara otomatis sewaktu-waktu mengubah Tanggal Tempo dengan periode Tanggal Akhir Bayar berikutnya dan menjumlahkan akumulasi Denda yang harus Anda bayar untuk tiap tagihan.</small>
                        </li>
                        <li class="list-item">
                            <small>Anda dipersilakan mengajukan dispensasi dengan menghubungi bagian Keuangan.</small>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

<!-- Modal Pembayaran -->
<div class="modal fade" id="information-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Pembayaran</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p id="loading">
                    <i class="fa fa-spinner fa-spin"></i> Sedang memuat...
                </p>
                <div class="row" id="tagihan-terpilih" style="display: none;">
                    <div class="col-md-6 mb-2">
                        <p class="text-blue-dark">
                            <strong>Tagihan terpilih.</strong>
                        </p>
                        <!-- Placeholder untuk data tagihan terpilih -->
                        <div id="tagihan-info"></div>
                    </div>
                    <div class="col-md-6">
                        <div class="callout callout-info py-1 mb-2 border-top-0 border-right-0 border-bottom-0">
                            <h5 class="mb-3">Total Pembayaran</h5>
                            <p class="lead mb-0">
                                <small class="align-top text-secondary">Rp</small><span id="total-pembayaran"></span>
                            </p>
                            <small>
                                <span class="text-secondary">Terbilang: </span><em id="terbilang"></em>
                            </small>

                            <p>
                                <div class="form-group field-tagihan-3">
                                    <div class="custom-control custom-checkbox">
                                        <input type="hidden" name="Deposit" value="0">
                                        <input type="checkbox" id="deposit" class="custom-control-input pilih-tagihan" name="deposit" value="0">
                                        <label class="custom-control-label" for="deposit">
                                            Gunakan deposit saya (<small class="align-top text-secondary">Rp</small>1.000.000)
                                        </label>
                                    </div>
                                </div>
                            </p>

                            <p class="mt-5">
                                <small>
                                    * Dengan menekan tombol <em>Bayar</em>,
                                    secara otomatis Anda menyetujui <a href="virtualaccount2.html">syarat dan ketentuan</a> yang berlaku
                                    serta mendapatkan Nomor Virtual Account [NAMA BANK] dengan masa aktif terbatas.
                                    Segera lakukan pembayaran dengan transfer ke Nomor Virtual Account yang Anda dapatkan.
                                </small>
                            </p>

                            <p class="mt-3">
                                <button type="button" class="btn btn-info" id="bayar">Bayar</button>
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    
    <script type="text/javascript">
    $(document).ready(function () {
    // Fungsi untuk menghitung total tagihan
    function hitungTotal() {
        let total = 0;
        let terpilih = [];

        // Loop untuk menghitung total tagihan yang dipilih
        $('.pilih-tagihan:checked').each(function() {
            let card = $(this).closest('.card');
            let tagihan = parseInt(card.find('.col-md-2 p').eq(0).text().replace(/\D/g, ''));
            total += tagihan;

            // Menyimpan informasi tagihan yang terpilih
            let namaTagihan = card.find('.col-md-4 strong').text();
            let potongan = card.find('.col-md-2 p').eq(1).text();
            terpilih.push({ namaTagihan, tagihan, potongan });
        });

        // Perbarui total di halaman
        $('#total-angka').text(total.toLocaleString('id-ID'));  // Format angka
        $('#total-bilangan').text(keTerbilang(total));  // Mengubah angka menjadi terbilang

        // Tampilkan informasi tagihan yang terpilih di dalam modal
        if (terpilih.length > 0) {
            $('#tagihan-info').html(
                terpilih.map(tagihan => `
                    <strong>${tagihan.namaTagihan}</strong><br>
                    <small>Tagihan: Rp ${tagihan.tagihan.toLocaleString('id-ID')} | Potongan: Rp ${tagihan.potongan.toLocaleString('id-ID')}</small>
                `).join('<br><br>')
            );
            $('#total-pembayaran').text(total.toLocaleString('id-ID'));
            $('#terbilang').text(keTerbilang(total));
            $('#tagihan-terpilih').show();
        } else {
            $('#tagihan-terpilih').hide();
        }
    }

    // Fungsi untuk mengubah angka menjadi terbilang
    function keTerbilang(angka) {
    const satuan = ['', 'Satu', 'Dua', 'Tiga', 'Empat', 'Lima', 'Enam', 'Tujuh', 'Delapan', 'Sembilan'];
    const belasan = ['Sebelas', 'Dua Belas', 'Tiga Belas', 'Empat Belas', 'Lima Belas', 'Enam Belas', 'Tujuh Belas', 'Delapan Belas', 'Sembilan Belas'];
    const puluhan = ['', '', 'Dua Puluh', 'Tiga Puluh', 'Empat Puluh', 'Lima Puluh', 'Enam Puluh', 'Tujuh Puluh', 'Delapan Puluh', 'Sembilan Puluh'];
    const ribuan = ['Ribu', 'Juta', 'Miliar', 'Triliun'];

    if (angka < 10) return satuan[angka];
    if (angka < 20) return belasan[angka - 11];
    if (angka < 100) return puluhan[Math.floor(angka / 10)] + (angka % 10 === 0 ? '' : ' ' + satuan[angka % 10]);
    if (angka < 1000) {
        return (angka < 200 ? 'Seratus' : satuan[Math.floor(angka / 100)] + ' Ratus') + (angka % 100 === 0 ? '' : ' ' + keTerbilang(angka % 100));
    }
    for (let i = 0, nilai = 1000; i < ribuan.length; i++, nilai *= 1000) {
        if (angka < nilai * 1000) {
            return keTerbilang(Math.floor(angka / nilai)) + ' ' + ribuan[i] + (angka % nilai === 0 ? '' : ' ' + keTerbilang(angka % nilai));
        }
    }
    return '';
}

    // Menghitung total tagihan saat checkbox berubah
    $('.pilih-tagihan').on('change', function() {
        hitungTotal(); // Hitung total setiap checkbox berubah
        const checkbox = $(this);
        if (checkbox.is(':checked')) {
            checkbox.closest('.card').addClass('border-info');
        } else {
            checkbox.closest('.card').removeClass('border-info');
        }
    });

    // Tombol Bayar di halaman utama
    $('#submit-tagihan').on('click', function () {
        const total = parseInt($('#total-angka').text().replace(/\D/g, ''));
        if (total > 0) {
            // Menampilkan modal jika ada tagihan yang dipilih
            $('#information-modal').modal('show');
            $('#information-modal').on('shown.bs.modal', function () {
                setTimeout(function () {
                    $('#loading').attr('style', 'display: none;');
                    $('#tagihan-terpilih').removeAttr('style', 'style');
                }, 1000);
            });
        } else {
            alert("Silakan pilih tagihan yang ingin dibayar terlebih dahulu.");
        }
    });

    // Tombol Bayar di modal
    $('#bayar').on('click', function () {
        window.location.replace("virtualaccount2.html"); // Mengarahkan ke halaman pembayaran
    });

    // Hover effect pada card
    $('.card-tagihan').hover(
        function() { $(this).addClass('shadow'); },
        function() { $(this).removeClass('shadow'); }
    );
});
</script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="assets/popperjs/dist/umd/popper.min.js"></script>
    <script src="assets/bootstrap/dist/js/bootstrap.min.js"></script>
</body>
</html>